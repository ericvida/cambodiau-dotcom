{"id":"fc","warnings":[],"errors":[],"js":"function defineName$__(cls,name){\n\tObject.defineProperty(cls,\"name\",{value:name,configurable:true});\n};;\nfunction inheritClass$__(cls){\n\tObject.getPrototypeOf(cls.prototype).constructor?.inherited?.(cls);\n};\nconst $__init__$ = Symbol.for('#__init__'), $__patch__$ = Symbol.for('#__patch__'), $__initor__$ = Symbol.for('#__initor__'), $__inited__$ = Symbol.for('#__inited__'), $__hooks__$ = Symbol.for('#__hooks__'), $getRenderContext$ = Symbol.for('#getRenderContext'), $getDynamicContext$ = Symbol.for('#getDynamicContext');\nvar $1 = Symbol();\n\n/*body*/\n\n\nexport const renderContext = {\n\tcontext: null\n};\n\nclass Renderer {\n\t[$__patch__$]($$ = {}){\n\t\tvar $2;\n\t\t($2 = $$.stack) !== undefined && (this.stack = $2);\n\t\t\n\t}\n\tconstructor($$ = null){\n\t\tthis[$__init__$]($$);\n\t}\n\t[$__init__$]($$ = null,deep = true){\n\t\tvar $3;\n\t\tthis.stack = ($$ && ($3 = $$.stack) !== undefined) ? ($3) : [];\n\t\t\n\t}\n\tpush(el){\n\t\t\n\t\treturn this.stack.push(el);\n\t}\n\t\n\tpop(el){\n\t\t\n\t\treturn this.stack.pop();\n\t}\n\tstatic {\n\t\tdefineName$__(this,'Renderer');}\n};\n\nexport const renderer = new Renderer;\n\nexport class RenderContext extends Map {\n\t\n\tconstructor(parent,sym = null){\n\t\t\n\t\tsuper();\n\t\tthis._ = parent;\n\t\tthis.sym = sym;\n\t\tthis[$__initor__$]===$1 && (this[$__hooks__$]&&this[$__hooks__$].inited(this),this[$__inited__$] && this[$__inited__$]());\n\t}\n\t\n\tpop(){\n\t\t\n\t\treturn renderContext.context = null;\n\t}\n\t\n\t[$getRenderContext$](sym){\n\t\t\n\t\tlet out = this.get(sym);\n\t\tout || this.set(sym,out = new RenderContext(this._,sym));\n\t\treturn renderContext.context = out;\n\t\t\n\t\t// createRenderContext(self,sym)\n\t}\n\t[$getDynamicContext$](sym,key){\n\t\t\n\t\treturn this[$getRenderContext$](sym)[$getRenderContext$](key);\n\t}\n\t\n\trun(value){\n\t\t\n\t\tthis.value = value;\n\t\tif (renderContext.context == this) { renderContext.context = null };\n\t\treturn this.get(value);\n\t}\n\t\n\tcache(val){\n\t\t\n\t\tthis.set(this.value,val);\n\t\treturn val;\n\t}\n\tstatic {\n\t\tthis.prototype[$__initor__$] = $1;defineName$__(this,'RenderContext');inheritClass$__(this);}\n};\n\nexport function createRenderContext(cache,key = Symbol(),up = cache){\n\t\n\treturn renderContext.context = cache[key] ||= new RenderContext(up,key);\n};\n\nexport function getRenderContext(){\n\t\n\tlet ctx = renderContext.context;\n\tlet res = ctx || new RenderContext(null);\n\tif (globalThis.DEBUG_IMBA) {\n\t\t\n\t\tif (!(ctx) && renderer.stack.length > 0) {\n\t\t\t\n\t\t\tconsole.warn(\"detected unmemoized nodes in\",renderer.stack.slice(0),\"see https://imba.io\",res);\n\t\t};\n\t};\n\t\n\tif (ctx) { renderContext.context = null };\n\treturn res;\n\t// {map:new Map}\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5pbWJhIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY29udGV4dC5pbWJhIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgY29uc3QgcmVuZGVyQ29udGV4dCA9IHtcblx0Y29udGV4dDogbnVsbFxuXG59XG5cbmNsYXNzIFJlbmRlcmVyXG5cblx0c3RhY2sgPSBbXVxuXG5cdGRlZiBwdXNoIGVsXG5cdFx0c3RhY2sucHVzaChlbClcblxuXHRkZWYgcG9wIGVsXG5cdFx0c3RhY2sucG9wIVxuXG5leHBvcnQgY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXJcblxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbnRleHQgPCBNYXBcblx0ZGVmIGNvbnN0cnVjdG9yIHBhcmVudCxzeW0gPSBudWxsXG5cdFx0c3VwZXIoKVxuXHRcdHNlbGYuXyA9IHBhcmVudFxuXHRcdHNlbGYuc3ltID0gc3ltXG5cblx0ZGVmIHBvcFxuXHRcdHJlbmRlckNvbnRleHQuY29udGV4dCA9IG51bGxcblx0XG5cdGRlZiAjZ2V0UmVuZGVyQ29udGV4dCBzeW1cblx0XHRsZXQgb3V0ID0gc2VsZi5nZXQoc3ltKVxuXHRcdG91dCB8fCBzZWxmLnNldChzeW0sb3V0ID0gbmV3IFJlbmRlckNvbnRleHQoc2VsZi5fLHN5bSkpXG5cdFx0cmV0dXJuIHJlbmRlckNvbnRleHQuY29udGV4dCA9IG91dFxuXG5cdFx0IyBjcmVhdGVSZW5kZXJDb250ZXh0KHNlbGYsc3ltKVxuXHRkZWYgI2dldER5bmFtaWNDb250ZXh0IHN5bSwga2V5XG5cdFx0I2dldFJlbmRlckNvbnRleHQoc3ltKS4jZ2V0UmVuZGVyQ29udGV4dChrZXkpXG5cblx0ZGVmIHJ1biB2YWx1ZVxuXHRcdHNlbGYudmFsdWUgPSB2YWx1ZVxuXHRcdHJlbmRlckNvbnRleHQuY29udGV4dCA9IG51bGwgaWYgcmVuZGVyQ29udGV4dC5jb250ZXh0ID09IHNlbGZcblx0XHRyZXR1cm4gc2VsZi5nZXQodmFsdWUpXG5cblx0ZGVmIGNhY2hlIHZhbFxuXHRcdHNlbGYuc2V0KHNlbGYudmFsdWUsdmFsKVxuXHRcdHJldHVybiB2YWxcblxuZXhwb3J0IGRlZiBjcmVhdGVSZW5kZXJDb250ZXh0IGNhY2hlLGtleSA9IFN5bWJvbCEsdXAgPSBjYWNoZVxuXHRyZXR1cm4gcmVuZGVyQ29udGV4dC5jb250ZXh0ID0gY2FjaGVba2V5XSB8fD0gbmV3IFJlbmRlckNvbnRleHQodXAsa2V5KVxuXG5leHBvcnQgZGVmIGdldFJlbmRlckNvbnRleHRcblx0bGV0IGN0eCA9IHJlbmRlckNvbnRleHQuY29udGV4dFxuXHRsZXQgcmVzID0gY3R4IG9yIG5ldyBSZW5kZXJDb250ZXh0KG51bGwpXG5cdGlmIGdsb2JhbC5ERUJVR19JTUJBXG5cdFx0aWYgIWN0eCBhbmQgcmVuZGVyZXIuc3RhY2subGVuZ3RoID4gMFxuXHRcdFx0Y29uc29sZS53YXJuIFwiZGV0ZWN0ZWQgdW5tZW1vaXplZCBub2RlcyBpblwiLHJlbmRlcmVyLnN0YWNrLnNsaWNlKDApLFwic2VlIGh0dHBzOi8vaW1iYS5pb1wiLHJlc1xuXG5cdHJlbmRlckNvbnRleHQuY29udGV4dCA9IG51bGwgaWYgY3R4XG5cdHJldHVybiByZXNcblx0IyB7bWFwOm5ldyBNYXB9Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUVhLE1BQVAsQ0FBTyxNQUFBLGFBQWEsR0FBRztDQUM1QixPQUFPLEVBQUUsSUFBSTtDQUViOztBQUVELEtBQUssQ0FBQyxRQUFRLEVBQUE7dUJBUGQ7O1dBU0MsS0FBSyxDQUFBLHdCQUFMLEtBQUs7O0VBVE47dUJBQUE7O0VBQUE7b0NBQUE7O09BU0MsS0FBSyxtQkFBTCxLQUFLLENBQUEscUJBQUEsSUFBRyxFQUFFOztFQVRYO0NBV0ssSUFBSSxDQUFDLEVBQUUsQ0FBQTs7RUFDVixPQUFBLEtBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7RUFBQTs7Q0FFWCxHQUFHLENBQUMsRUFBRSxDQUFBOztFQUNULE9BQUEsS0FB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","css":""}